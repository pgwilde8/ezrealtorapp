<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EZRealtor Pricing</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Stripe.js (optional if your backend returns a hosted checkout_url) -->
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body class="bg-gray-50 text-gray-900">
  <!-- HEADER -->
  <header class="bg-white border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a href="/" class="font-bold">EZRealtor.app</a>
      <a href="#addons" class="text-sm underline">Add-ons</a>
    </div>
  </header>

  <!-- HERO -->
  <section class="py-12 bg-gradient-to-b from-white to-gray-50">
    <div class="max-w-3xl mx-auto px-4 text-center">
      <h1 class="text-3xl sm:text-4xl font-bold">Simple, predictable pricing</h1>
      <p class="mt-3 text-gray-600">Tiered by <strong>leads/month</strong>. Pooled email, SMS, calls, and AI. <em>Caps are processing limits—no traffic/lead guarantees.</em></p>
    </div>
  </section>

  <!-- PRICING GRID -->
  <section class="py-8">
    <!-- Top Row: 3 columns -->
<div class="max-w-5xl mx-auto py-12 px-4">
  <h2 class="text-3xl font-bold text-center mb-8">EZRealtor Pricing</h2>
  <p class="text-center text-gray-600 mb-10">
    Lead amounts shown are the maximum your plan can process per month. Actual leads depend on your site traffic and marketing. No lead quantity is guaranteed.
  </p>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <!-- Trial -->
    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
      <div class="text-center mb-4">
        <h3 class="text-2xl font-bold mb-2">Free Trial</h3>
        <div class="text-5xl font-bold text-gray-900 mb-1">$0</div>
        <div class="text-sm text-gray-500">14 days</div>
      </div>
      
      <div class="mb-4 pb-4 border-b">
        <div class="text-center">
          <div class="text-3xl font-bold text-blue-600">50</div>
          <div class="text-sm text-gray-600">Leads per month</div>
        </div>
      </div>
      
      <div class="space-y-2 text-sm text-gray-700 mb-6 flex-grow">
        <div class="flex items-center">
          <i class="fas fa-phone text-gray-400 w-5 mr-2"></i>
          <span>15 voice minutes</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-sms text-gray-400 w-5 mr-2"></i>
          <span>50 SMS messages</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-envelope text-gray-400 w-5 mr-2"></i>
          <span>100 emails</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-times-circle text-gray-400 w-5 mr-2"></i>
          <span class="text-gray-500">No phone number</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-check-circle text-green-500 w-5 mr-2"></i>
          <span>Full platform access</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-check-circle text-green-500 w-5 mr-2"></i>
          <span>No credit card required</span>
        </div>
      </div>
      
      <button data-plan="trial" class="plan-btn w-full bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 font-semibold transition">Start Free Trial</button>
    </div>
    
    <!-- Starter -->
    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col border-2 border-blue-500 relative">
      <div class="absolute top-0 right-0 bg-blue-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg rounded-tr-lg">
        POPULAR
      </div>
      <div class="text-center mb-4">
        <h3 class="text-2xl font-bold mb-2">Starter</h3>
        <div class="text-5xl font-bold text-gray-900 mb-1">$97</div>
        <div class="text-sm text-gray-500">per month</div>
      </div>
      
      <div class="mb-4 pb-4 border-b">
        <div class="text-center">
          <div class="text-3xl font-bold text-blue-600">150</div>
          <div class="text-sm text-gray-600">Leads per month</div>
        </div>
      </div>
      
      <div class="space-y-2 text-sm text-gray-700 mb-6 flex-grow">
        <div class="flex items-center font-semibold text-blue-600">
          <i class="fas fa-phone-alt w-5 mr-2"></i>
          <span>📞 Dedicated phone number</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-phone text-blue-600 w-5 mr-2"></i>
          <span><strong>100</strong> voice minutes</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-sms text-green-600 w-5 mr-2"></i>
          <span><strong>150</strong> SMS messages</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-envelope text-purple-600 w-5 mr-2"></i>
          <span><strong>500</strong> emails</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-voicemail text-orange-600 w-5 mr-2"></i>
          <span>30 voicemail transcriptions</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-check-circle text-green-500 w-5 mr-2"></i>
          <span>Auto-bump protection</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-check-circle text-green-500 w-5 mr-2"></i>
          <span>AI lead analysis</span>
        </div>
      </div>
      
      <button data-plan="starter" class="plan-btn w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold transition">Choose Starter</button>
    </div>
    
    <!-- Growth -->
    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
      <div class="text-center mb-4">
        <h3 class="text-2xl font-bold mb-2">Growth</h3>
        <div class="text-5xl font-bold text-gray-900 mb-1">$147</div>
        <div class="text-sm text-gray-500">per month</div>
      </div>
      
      <div class="mb-4 pb-4 border-b">
        <div class="text-center">
          <div class="text-3xl font-bold text-blue-600">500</div>
          <div class="text-sm text-gray-600">Leads per month</div>
        </div>
      </div>
      
      <div class="space-y-2 text-sm text-gray-700 mb-6 flex-grow">
        <div class="flex items-center font-semibold text-blue-600">
          <i class="fas fa-phone-alt w-5 mr-2"></i>
          <span>📞 Dedicated phone number</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-phone text-blue-600 w-5 mr-2"></i>
          <span><strong>300</strong> voice minutes (3x)</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-sms text-green-600 w-5 mr-2"></i>
          <span><strong>500</strong> SMS messages (3.3x)</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-envelope text-purple-600 w-5 mr-2"></i>
          <span><strong>1,500</strong> emails (3x)</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-voicemail text-orange-600 w-5 mr-2"></i>
          <span>100 voicemail transcriptions</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-globe text-indigo-600 w-5 mr-2"></i>
          <span><strong>Custom domain</strong></span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-check-circle text-green-500 w-5 mr-2"></i>
          <span>Advanced AI messaging</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-check-circle text-green-500 w-5 mr-2"></i>
          <span>Weekend boost available</span>
        </div>
      </div>
      
      <button data-plan="growth" class="plan-btn w-full bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 font-semibold transition">Choose Growth</button>
    </div>
  </div>
  
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Scale -->
    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
      <div class="text-center mb-4">
        <h3 class="text-2xl font-bold mb-2">Scale</h3>
        <div class="text-5xl font-bold text-gray-900 mb-1">$237</div>
        <div class="text-sm text-gray-500">per month</div>
      </div>
      
      <div class="mb-4 pb-4 border-b">
        <div class="text-center">
          <div class="text-3xl font-bold text-blue-600">1,500</div>
          <div class="text-sm text-gray-600">Leads per month</div>
        </div>
      </div>
      
      <div class="space-y-2 text-sm text-gray-700 mb-6 flex-grow">
        <div class="flex items-center font-semibold text-blue-600">
          <i class="fas fa-phone-alt w-5 mr-2"></i>
          <span>📞 Dedicated phone number</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-phone text-blue-600 w-5 mr-2"></i>
          <span><strong>1,000</strong> voice minutes</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-sms text-green-600 w-5 mr-2"></i>
          <span><strong>1,500</strong> SMS messages</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-envelope text-purple-600 w-5 mr-2"></i>
          <span><strong>5,000</strong> emails</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-voicemail text-orange-600 w-5 mr-2"></i>
          <span>300 voicemail transcriptions</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-globe text-indigo-600 w-5 mr-2"></i>
          <span>Custom domain</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-headset text-green-500 w-5 mr-2"></i>
          <span><strong>Priority support</strong></span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-check-circle text-green-500 w-5 mr-2"></i>
          <span>All Growth features</span>
        </div>
      </div>
      
      <button data-plan="scale" class="plan-btn w-full bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 font-semibold transition">Choose Scale</button>
    </div>
    
    <!-- Pro -->
    <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
      <div class="text-center mb-4">
        <h3 class="text-2xl font-bold mb-2">Pro</h3>
        <div class="text-5xl font-bold text-gray-900 mb-1">$437</div>
        <div class="text-sm text-gray-500">per month</div>
      </div>
      
      <div class="mb-4 pb-4 border-b">
        <div class="text-center">
          <div class="text-3xl font-bold text-blue-600">4,000</div>
          <div class="text-sm text-gray-600">Leads per month</div>
        </div>
      </div>
      
      <div class="space-y-2 text-sm text-gray-700 mb-6 flex-grow">
        <div class="flex items-center font-semibold text-blue-600">
          <i class="fas fa-phone-alt w-5 mr-2"></i>
          <span>📞 Dedicated phone number</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-phone text-blue-600 w-5 mr-2"></i>
          <span><strong>3,000</strong> voice minutes</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-sms text-green-600 w-5 mr-2"></i>
          <span><strong>5,000</strong> SMS messages</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-envelope text-purple-600 w-5 mr-2"></i>
          <span><strong>15,000</strong> emails</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-voicemail text-orange-600 w-5 mr-2"></i>
          <span>1,000 voicemail transcriptions</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-globe text-indigo-600 w-5 mr-2"></i>
          <span>Custom domain</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-puzzle-piece text-purple-500 w-5 mr-2"></i>
          <span><strong>Custom integrations</strong></span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-check-circle text-green-500 w-5 mr-2"></i>
          <span>All Scale features</span>
        </div>
      </div>
      
      <button data-plan="pro" class="plan-btn w-full bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 font-semibold transition">Choose Pro</button>
    </div>
  </div>
</div>
        

    <div class="max-w-5xl mx-auto px-4 mt-6 text-xs text-gray-500">
      *Caps are processing limits, not guarantees of visitors or leads. Bundles reset monthly. International messaging may be priced separately. Auto-bump: 1 tier max/month, pro-rated; one forgiveness per quarter. Toggle “Pause at cap” in settings to prevent auto-bump.
    </div>
  </section>

  <!-- AUTO-BUMP EXPLAINER -->
  <section class="py-12 bg-white">
    <div class="max-w-6xl mx-auto px-4">
      <div class="grid md:grid-cols-3 gap-8 text-center">
        <div>
          <div class="w-14 h-14 rounded-full bg-yellow-100 mx-auto grid place-items-center mb-3">🔔</div>
          <h3 class="font-semibold">Smart Alerts</h3>
          <p class="text-sm text-gray-600 mt-1">Heads-up at 80% and 95% of your lead cap.</p>
        </div>
        <div>
          <div class="w-14 h-14 rounded-full bg-green-100 mx-auto grid place-items-center mb-3">⬆️</div>
          <h3 class="font-semibold">Auto-bump Protection</h3>
          <p class="text-sm text-gray-600 mt-1">Hit the cap? We finish the month in the next tier (1 tier max, pro-rated).</p>
        </div>
        <div>
          <div class="w-14 h-14 rounded-full bg-blue-100 mx-auto grid place-items-center mb-3">↩️</div>
          <h3 class="font-semibold">Forgiveness</h3>
          <p class="text-sm text-gray-600 mt-1">One forgiveness per quarter if a spike was a blip.</p>
        </div>
      </div>
      <div class="mt-8 bg-gray-50 rounded-xl p-6 text-center">
        <h4 class="font-semibold mb-1">Want control?</h4>
        <p class="text-sm text-gray-600">Enable <strong>“Pause at cap”</strong> in settings to pause instead of auto-bump.</p>
      </div>
    </div>
  </section>

  <!-- ADD-ONS -->
  <section id="addons" class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-10">
        <h2 class="text-2xl font-bold">Power-ups & Add-ons</h2>
        <p class="text-gray-600">Extend your plan with targeted boosters</p>
      </div>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="bg-white rounded-xl p-6 shadow-sm text-center">
          <h3 class="font-semibold">Weekend Boost</h3>
          <div class="text-2xl font-bold text-orange-600 mt-1">$39</div>
          <p class="text-sm text-gray-600 mt-2">+300 SMS + 60 call minutes (Fri–Sun). Great for open houses.</p>
        </div>
        <div class="bg-white rounded-xl p-6 shadow-sm text-center">
          <h3 class="font-semibold">Extra Page</h3>
          <div class="text-2xl font-bold text-blue-600 mt-1">$29<span class="text-sm text-gray-500">/mo</span></div>
          <p class="text-sm text-gray-600 mt-2">Add another lead page. Shares your pooled quotas.</p>
        </div>
        <div class="bg-white rounded-xl p-6 shadow-sm text-center">
          <h3 class="font-semibold">Dedicated Email IP</h3>
          <div class="text-2xl font-bold text-purple-600 mt-1">$39<span class="text-sm text-gray-500">/mo</span></div>
          <p class="text-sm text-gray-600 mt-2">Improve deliverability with your own IP.</p>
        </div>
        <div class="bg-white rounded-xl p-6 shadow-sm text-center">
          <h3 class="font-semibold">White-label</h3>
          <div class="text-2xl font-bold text-emerald-600 mt-1">$49<span class="text-sm text-gray-500">/mo</span></div>
          <p class="text-sm text-gray-600 mt-2">Custom domain & branding; remove EZRealtor references.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="py-16 bg-gradient-to-r from-indigo-600 to-blue-600 text-white text-center">
    <div class="max-w-3xl mx-auto px-4">
      <h2 class="text-3xl font-bold">Ready to start capturing leads?</h2>
      <p class="mt-2 text-lg text-indigo-100">Start with a 14-day free trial. Full access. Caps apply.</p>
      <button data-plan="trial" class="plan-btn mt-6 bg-white text-indigo-700 hover:bg-indigo-50 px-8 py-3 rounded-lg font-semibold">
        Start Free Trial
      </button>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-gray-900 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 grid md:grid-cols-4 gap-8 text-sm">
      <div><div class="font-semibold mb-2">EZRealtor.app</div><p class="text-gray-400">AI-powered lead handling for modern realtors.</p></div>
      <div><div class="font-semibold mb-2">Product</div><ul class="space-y-1 text-gray-400"><li><a href="#" class="hover:text-white">Features</a></li><li><a href="#" class="hover:text-white">Pricing</a></li><li><a href="#" class="hover:text-white">Integrations</a></li></ul></div>
      <div><div class="font-semibold mb-2">Support</div><ul class="space-y-1 text-gray-400"><li><a href="#" class="hover:text-white">Help Center</a></li><li><a href="#" class="hover:text-white">Contact</a></li><li><a href="#" class="hover:text-white">Status</a></li></ul></div>
      <div><div class="font-semibold mb-2">Legal</div><ul class="space-y-1 text-gray-400"><li><a href="#" class="hover:text-white">Privacy</a></li><li><a href="#" class="hover:text-white">Terms</a></li></ul></div>
    </div>
    <div class="border-t border-gray-800 text-center py-6 text-gray-400 text-xs">&copy; 2025 EZRealtor.app. All rights reserved.</div>
  </footer>

  <!-- USER INFO MODAL -->
  <div id="userInfoModal" class="hidden fixed inset-0 bg-black/50 z-[100]">
    <div class="min-h-full w-full grid place-items-center p-4">
      <div class="bg-white rounded-xl max-w-md w-full p-6 shadow-xl">
        <h3 class="text-xl font-bold mb-2">Complete your info</h3>
        <p class="text-sm text-gray-600 mb-4">We’ll create your workspace and send the receipt.</p>
        <form id="userInfoForm" class="space-y-3">
          <input id="userName" required placeholder="Full name" class="w-full border rounded-lg px-3 py-2"/>
          <input id="userEmail" required type="email" placeholder="Email address" class="w-full border rounded-lg px-3 py-2"/>
          <div class="flex gap-2 pt-2">
            <button type="button" id="cancelModal" class="w-1/3 border rounded-lg px-3 py-2">Cancel</button>
            <button type="submit" class="w-2/3 bg-indigo-600 text-white rounded-lg px-3 py-2">Continue to payment</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- LOADING OVERLAY -->
  <div id="loading" class="hidden fixed inset-0 bg-black/50 z-[110]">
    <div class="min-h-full w-full grid place-items-center p-4">
      <div class="bg-white rounded-xl p-6 text-center shadow-xl">
        <div class="animate-spin rounded-full h-10 w-10 border-2 border-indigo-200 border-t-indigo-600 mx-auto mb-3"></div>
        <p class="text-sm text-gray-700">Setting up your account…</p>
      </div>
    </div>
  </div>

  <script>
    // Selected plan, shared across buttons → modal → checkout
    let selectedPlan = null;

    // Open modal on any ".plan-btn"
    document.querySelectorAll('.plan-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        selectedPlan = e.currentTarget.getAttribute('data-plan'); // starter|growth|scale|pro|trial
        document.getElementById('userInfoModal').classList.remove('hidden');
      });
    });

    document.getElementById('cancelModal').addEventListener('click', () => {
      document.getElementById('userInfoModal').classList.add('hidden');
      selectedPlan = null;
    });

    // Submit user info → call backend → redirect
    document.getElementById('userInfoForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('userName').value.trim();
      const email = document.getElementById('userEmail').value.trim();
      if (!name || !email || !selectedPlan) return;

      // Close modal + show loading
      document.getElementById('userInfoModal').classList.add('hidden');
      document.getElementById('loading').classList.remove('hidden');

      try {
        // Map front-end plan codes to your backend enums
        const planMapping = {
          trial: 'trial',
          starter: 'starter',
          growth: 'growth',
          scale: 'scale',
          pro: 'pro'
        };
        const plan_tier = planMapping[selectedPlan];
        if (!plan_tier) throw new Error('Invalid plan selected');

        const res = await fetch('/api/v1/billing/checkout-anonymous', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            plan_tier,
            billing_cycle: 'monthly',
            email,
            name
          })
        });

        if (!res.ok) {
          const err = await res.json().catch(() => ({}));
          throw new Error(err.detail || 'Checkout failed');
        }
        const data = await res.json();

        if (data.checkout_url) {
          window.location.href = data.checkout_url; // Hosted Checkout URL from backend
        } else {
          throw new Error('No checkout URL received');
        }
      } catch (err) {
        console.error(err);
        alert('Sorry, we couldn’t start checkout. Please try again or contact support.');
        document.getElementById('loading').classList.add('hidden');
        selectedPlan = null;
      }
    });

    // Handle success/cancel query params if your backend redirects back
    const params = new URLSearchParams(window.location.search);
    if (params.get('success')) {
      window.location.replace('https://login.ezrealtor.app?welcome=true');
    } else if (params.get('canceled')) {
      // Optional: show a soft toast
      console.log('Checkout canceled');
    }
  </script>
</body>
</html>
