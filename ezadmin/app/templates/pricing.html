<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EZRealtor Pricing</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Stripe.js (optional if your backend returns a hosted checkout_url) -->
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body class="bg-gray-50 text-gray-900">
  <!-- HEADER -->
  <header class="bg-white border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a href="/" class="font-bold">EZRealtor.app</a>
      <a href="#addons" class="text-sm underline">Add-ons</a>
    </div>
  </header>

  <!-- HERO -->
  <section class="py-12 bg-gradient-to-b from-white to-gray-50">
    <div class="max-w-3xl mx-auto px-4 text-center">
      <h1 class="text-3xl sm:text-4xl font-bold">Simple, predictable pricing</h1>
      <p class="mt-3 text-gray-600">Tiered by <strong>leads/month</strong>. Pooled email, SMS, calls, and AI. <em>Caps are processing limits‚Äîno traffic/lead guarantees.</em></p>
    </div>
  </section>

  <!-- PRICING GRID -->
  <section class="py-8">
    <!-- Top Row: 3 columns -->
<div class="max-w-5xl mx-auto py-12 px-4">
  <h2 class="text-3xl font-bold text-center mb-8">EZRealtor Pricing</h2>
  <p class="text-center text-gray-600 mb-10">
    Lead amounts shown are the maximum your plan can process per month. Actual leads depend on your site traffic and marketing. No lead quantity is guaranteed.
  </p>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <!-- Trial -->
    <div class="bg-white rounded-lg shadow p-6 flex flex-col items-center">
      <h3 class="text-xl font-semibold mb-2">Free Trial</h3>
      <div class="text-4xl font-bold mb-2">$0</div>
      <div class="text-gray-500 mb-4">Up to 50 leads/month</div>
      <ul class="text-sm text-gray-600 mb-6">
        <li>Full platform access</li>
        <li>No credit card required</li>
      </ul>
      <button data-plan="trial" class="plan-btn bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Start Free Trial</button>
    </div>
    <!-- Starter -->
    <div class="bg-white rounded-lg shadow p-6 flex flex-col items-center">
      <h3 class="text-xl font-semibold mb-2">Starter</h3>
      <div class="text-4xl font-bold mb-2">$97</div>
      <div class="text-gray-500 mb-4">Up to 150 leads/month</div>
      <ul class="text-sm text-gray-600 mb-6">
        <li>Auto-bump protection</li>
        <li>Basic AI messaging</li>
      </ul>
      <button data-plan="starter" class="plan-btn bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 text-center">Choose Starter</button>
    </div>
    <!-- Growth -->
    <div class="bg-white rounded-lg shadow p-6 flex flex-col items-center">
      <h3 class="text-xl font-semibold mb-2">Growth</h3>
      <div class="text-4xl font-bold mb-2">$147</div>
      <div class="text-gray-500 mb-4">Up to 500 leads/month</div>
      <ul class="text-sm text-gray-600 mb-6">
        <li>Advanced AI messaging</li>
        <li>Weekend boost add-on available</li>
      </ul>
      <button data-plan="growth" class="plan-btn bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 text-center">Choose Growth</button>
    </div>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Scale -->
    <div class="bg-white rounded-lg shadow p-6 flex flex-col items-center">
      <h3 class="text-xl font-semibold mb-2">Scale</h3>
      <div class="text-4xl font-bold mb-2">$237</div>
      <div class="text-gray-500 mb-4">Up to 1500 leads/month</div>
      <ul class="text-sm text-gray-600 mb-6">
        <li>Priority support</li>
        <li>All Growth features</li>
      </ul>
      <button data-plan="scale" class="plan-btn bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Choose Scale</button>
    </div>
    <!-- Pro -->
    <div class="bg-white rounded-lg shadow p-6 flex flex-col items-center">
      <h3 class="text-xl font-semibold mb-2">Pro</h3>
      <div class="text-4xl font-bold mb-2">$437</div>
      <div class="text-gray-500 mb-4">Up to 4000 leads/month</div>
      <ul class="text-sm text-gray-600 mb-6">
        <li>Custom integrations</li>
        <li>All Scale features</li>
      </ul>
      <button data-plan="pro" class="plan-btn bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Choose Pro</button>
    </div>
  </div>
</div>
        

    <div class="max-w-5xl mx-auto px-4 mt-6 text-xs text-gray-500">
      *Caps are processing limits, not guarantees of visitors or leads. Bundles reset monthly. International messaging may be priced separately. Auto-bump: 1 tier max/month, pro-rated; one forgiveness per quarter. Toggle ‚ÄúPause at cap‚Äù in settings to prevent auto-bump.
    </div>
  </section>

  <!-- AUTO-BUMP EXPLAINER -->
  <section class="py-12 bg-white">
    <div class="max-w-6xl mx-auto px-4">
      <div class="grid md:grid-cols-3 gap-8 text-center">
        <div>
          <div class="w-14 h-14 rounded-full bg-yellow-100 mx-auto grid place-items-center mb-3">üîî</div>
          <h3 class="font-semibold">Smart Alerts</h3>
          <p class="text-sm text-gray-600 mt-1">Heads-up at 80% and 95% of your lead cap.</p>
        </div>
        <div>
          <div class="w-14 h-14 rounded-full bg-green-100 mx-auto grid place-items-center mb-3">‚¨ÜÔ∏è</div>
          <h3 class="font-semibold">Auto-bump Protection</h3>
          <p class="text-sm text-gray-600 mt-1">Hit the cap? We finish the month in the next tier (1 tier max, pro-rated).</p>
        </div>
        <div>
          <div class="w-14 h-14 rounded-full bg-blue-100 mx-auto grid place-items-center mb-3">‚Ü©Ô∏è</div>
          <h3 class="font-semibold">Forgiveness</h3>
          <p class="text-sm text-gray-600 mt-1">One forgiveness per quarter if a spike was a blip.</p>
        </div>
      </div>
      <div class="mt-8 bg-gray-50 rounded-xl p-6 text-center">
        <h4 class="font-semibold mb-1">Want control?</h4>
        <p class="text-sm text-gray-600">Enable <strong>‚ÄúPause at cap‚Äù</strong> in settings to pause instead of auto-bump.</p>
      </div>
    </div>
  </section>

  <!-- ADD-ONS -->
  <section id="addons" class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-10">
        <h2 class="text-2xl font-bold">Power-ups & Add-ons</h2>
        <p class="text-gray-600">Extend your plan with targeted boosters</p>
      </div>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="bg-white rounded-xl p-6 shadow-sm text-center">
          <h3 class="font-semibold">Weekend Boost</h3>
          <div class="text-2xl font-bold text-orange-600 mt-1">$39</div>
          <p class="text-sm text-gray-600 mt-2">+300 SMS + 60 call minutes (Fri‚ÄìSun). Great for open houses.</p>
        </div>
        <div class="bg-white rounded-xl p-6 shadow-sm text-center">
          <h3 class="font-semibold">Extra Page</h3>
          <div class="text-2xl font-bold text-blue-600 mt-1">$29<span class="text-sm text-gray-500">/mo</span></div>
          <p class="text-sm text-gray-600 mt-2">Add another lead page. Shares your pooled quotas.</p>
        </div>
        <div class="bg-white rounded-xl p-6 shadow-sm text-center">
          <h3 class="font-semibold">Dedicated Email IP</h3>
          <div class="text-2xl font-bold text-purple-600 mt-1">$39<span class="text-sm text-gray-500">/mo</span></div>
          <p class="text-sm text-gray-600 mt-2">Improve deliverability with your own IP.</p>
        </div>
        <div class="bg-white rounded-xl p-6 shadow-sm text-center">
          <h3 class="font-semibold">White-label</h3>
          <div class="text-2xl font-bold text-emerald-600 mt-1">$49<span class="text-sm text-gray-500">/mo</span></div>
          <p class="text-sm text-gray-600 mt-2">Custom domain & branding; remove EZRealtor references.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="py-16 bg-gradient-to-r from-indigo-600 to-blue-600 text-white text-center">
    <div class="max-w-3xl mx-auto px-4">
      <h2 class="text-3xl font-bold">Ready to start capturing leads?</h2>
      <p class="mt-2 text-lg text-indigo-100">Start with a 14-day free trial. Full access. Caps apply.</p>
      <button data-plan="trial" class="plan-btn mt-6 bg-white text-indigo-700 hover:bg-indigo-50 px-8 py-3 rounded-lg font-semibold">
        Start Free Trial
      </button>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-gray-900 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 grid md:grid-cols-4 gap-8 text-sm">
      <div><div class="font-semibold mb-2">EZRealtor.app</div><p class="text-gray-400">AI-powered lead handling for modern realtors.</p></div>
      <div><div class="font-semibold mb-2">Product</div><ul class="space-y-1 text-gray-400"><li><a href="#" class="hover:text-white">Features</a></li><li><a href="#" class="hover:text-white">Pricing</a></li><li><a href="#" class="hover:text-white">Integrations</a></li></ul></div>
      <div><div class="font-semibold mb-2">Support</div><ul class="space-y-1 text-gray-400"><li><a href="#" class="hover:text-white">Help Center</a></li><li><a href="#" class="hover:text-white">Contact</a></li><li><a href="#" class="hover:text-white">Status</a></li></ul></div>
      <div><div class="font-semibold mb-2">Legal</div><ul class="space-y-1 text-gray-400"><li><a href="#" class="hover:text-white">Privacy</a></li><li><a href="#" class="hover:text-white">Terms</a></li></ul></div>
    </div>
    <div class="border-t border-gray-800 text-center py-6 text-gray-400 text-xs">&copy; 2025 EZRealtor.app. All rights reserved.</div>
  </footer>

  <!-- USER INFO MODAL -->
  <div id="userInfoModal" class="hidden fixed inset-0 bg-black/50 z-[100]">
    <div class="min-h-full w-full grid place-items-center p-4">
      <div class="bg-white rounded-xl max-w-md w-full p-6 shadow-xl">
        <h3 class="text-xl font-bold mb-2">Complete your info</h3>
        <p class="text-sm text-gray-600 mb-4">We‚Äôll create your workspace and send the receipt.</p>
        <form id="userInfoForm" class="space-y-3">
          <input id="userName" required placeholder="Full name" class="w-full border rounded-lg px-3 py-2"/>
          <input id="userEmail" required type="email" placeholder="Email address" class="w-full border rounded-lg px-3 py-2"/>
          <div class="flex gap-2 pt-2">
            <button type="button" id="cancelModal" class="w-1/3 border rounded-lg px-3 py-2">Cancel</button>
            <button type="submit" class="w-2/3 bg-indigo-600 text-white rounded-lg px-3 py-2">Continue to payment</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- LOADING OVERLAY -->
  <div id="loading" class="hidden fixed inset-0 bg-black/50 z-[110]">
    <div class="min-h-full w-full grid place-items-center p-4">
      <div class="bg-white rounded-xl p-6 text-center shadow-xl">
        <div class="animate-spin rounded-full h-10 w-10 border-2 border-indigo-200 border-t-indigo-600 mx-auto mb-3"></div>
        <p class="text-sm text-gray-700">Setting up your account‚Ä¶</p>
      </div>
    </div>
  </div>

  <script>
    // Selected plan, shared across buttons ‚Üí modal ‚Üí checkout
    let selectedPlan = null;

    // Open modal on any ".plan-btn"
    document.querySelectorAll('.plan-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        selectedPlan = e.currentTarget.getAttribute('data-plan'); // starter|growth|scale|pro|trial
        document.getElementById('userInfoModal').classList.remove('hidden');
      });
    });

    document.getElementById('cancelModal').addEventListener('click', () => {
      document.getElementById('userInfoModal').classList.add('hidden');
      selectedPlan = null;
    });

    // Submit user info ‚Üí call backend ‚Üí redirect
    document.getElementById('userInfoForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('userName').value.trim();
      const email = document.getElementById('userEmail').value.trim();
      if (!name || !email || !selectedPlan) return;

      // Close modal + show loading
      document.getElementById('userInfoModal').classList.add('hidden');
      document.getElementById('loading').classList.remove('hidden');

      try {
        // Map front-end plan codes to your backend enums
        const planMapping = {
          trial: 'trial',
          starter: 'starter',
          growth: 'growth',
          scale: 'scale',
          pro: 'pro'
        };
        const plan_tier = planMapping[selectedPlan];
        if (!plan_tier) throw new Error('Invalid plan selected');

        const res = await fetch('/api/v1/billing/checkout-anonymous', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            plan_tier,
            billing_cycle: 'monthly',
            email,
            name
          })
        });

        if (!res.ok) {
          const err = await res.json().catch(() => ({}));
          throw new Error(err.detail || 'Checkout failed');
        }
        const data = await res.json();

        if (data.checkout_url) {
          window.location.href = data.checkout_url; // Hosted Checkout URL from backend
        } else {
          throw new Error('No checkout URL received');
        }
      } catch (err) {
        console.error(err);
        alert('Sorry, we couldn‚Äôt start checkout. Please try again or contact support.');
        document.getElementById('loading').classList.add('hidden');
        selectedPlan = null;
      }
    });

    // Handle success/cancel query params if your backend redirects back
    const params = new URLSearchParams(window.location.search);
    if (params.get('success')) {
      window.location.replace('https://login.ezrealtor.app?welcome=true');
    } else if (params.get('canceled')) {
      // Optional: show a soft toast
      console.log('Checkout canceled');
    }
  </script>
</body>
</html>
